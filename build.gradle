plugins {
    id 'java'
    id 'info.solidsoft.pitest' version "1.7.0"
}

group = 'poc'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation "org.mockito:mockito-core:3.0.0"
    testImplementation "org.mockito:mockito-junit-jupiter:3.0.0"
    testImplementation "org.assertj:assertj-core:3.13.2"
    compileOnly 'org.projectlombok:lombok:1.18.22'
    annotationProcessor 'org.projectlombok:lombok:1.18.22'

    testCompileOnly 'org.projectlombok:lombok:1.18.22'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.22'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.2'
}

pitest {
    pitestVersion = "1.7.5"
    junit5PluginVersion = '0.15'
    testPlugin = "junit5"
    targetClasses = ['poc.*']
    outputFormats = ['XML', 'HTML']
//    mutationThreshold = 100
//    coverageThreshold = 100
    reportDir = 'build/reports/mutation-tests-results' as File
//    timestampedReports = false
//    failWhenNoMutations = true
    historyInputLocation = 'build/history.pitest'
    historyOutputLocation = 'build/history.pitest'
    verbose = true
}

tasks.named('test') {
    useJUnitPlatform()
}
